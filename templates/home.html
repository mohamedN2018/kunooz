{% extends 'base.html' %}

{% load static %}

{% block title %}الرئيسية - كنوز{% endblock %}

{% block extra_css %}
    <!-- earth CSS مخصص -->
    <style>
        .earth {
            position: relative;
            background: radial-gradient(circle at 30% 30%, 
                #77c6ff 0%,
                #1e4fd8 20%,
                #0b2a6f 45%,
                #041531 70%,
                #000814 100%
            );
            box-shadow: 
                inset 0 0 80px rgba(255,255,255,.15),
                inset -40px 0 100px rgba(0,255,255,.25),
                0 0 150px rgba(30,144,255,.6),
                0 0 300px rgba(30,144,255,.3);
        }

        /* القارات الواقعية */
        .earth::before {
            content:"";
            position:absolute;
            inset:0;
            border-radius:50%;
            background-image:url("https://upload.wikimedia.org/wikipedia/commons/8/80/Earthmap1000x500compac.jpg");
            background-size:cover;
            background-position:center;
            opacity:.85;
            mix-blend-mode:soft-light;
        }

        /* شبكة الأرض */
        .earth::after {
            content:"";
            position:absolute;
            inset:0;
            border-radius:50%;
            background:
            linear-gradient(rgba(255,255,255,.07) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255,255,255,.07) 1px, transparent 1px);
            background-size:40px 40px;
            opacity:.25;
        }

        .atmosphere {
            background: radial-gradient(circle,
                rgba(120,200,255,.35),
                rgba(0,120,255,.15),
                transparent 70%);
            box-shadow:0 0 200px rgba(100,200,255,.6);
        }

        .dark .earth {
            box-shadow:
                inset 0 0 60px rgba(255,255,255,0.05),
                0 0 120px rgba(59,130,246,0.8),
                0 0 220px rgba(14,165,233,0.6);
        }

        .atmosphere {
            background: radial-gradient(circle,
                rgba(147,197,253,0.4),
                rgba(56,189,248,0.2),
                transparent 70%
            );
            box-shadow: 0 0 100px rgba(147,197,253,0.5);
        }

        /* النجوم */
        #stars {
            background-image:
                radial-gradient(1px 1px at 20px 30px, #aaa, transparent),
                radial-gradient(1.5px 1.5px at 80px 60px, #bbb, transparent),
                radial-gradient(1px 1px at 140px 120px, #999, transparent);
            background-size: 200px 200px;
            animation: twinkle 6s infinite alternate;
        }

        .dark #stars {
            background-image:
                radial-gradient(1.5px 1.5px at 20px 30px, #fff, transparent),
                radial-gradient(2px 2px at 80px 60px, #eee, transparent),
                radial-gradient(1px 1px at 140px 120px, #ddd, transparent);
        }

        @keyframes twinkle {
            0% { opacity: .4; }
            100% { opacity: 1; }
        }

    </style>

{% endblock %}


{% block content %}
    <section class="relative hero-gradient text-white min-h-[60vh] flex items-center dark:bg-gray-900 dark:text-gray-100 section-animate animate-card transition-colors duration-300">
            <div class="absolute inset-0 overflow-hidden">
                <img id="hero-bg"
                    src="{% static 'images/back-hero2.png' %}"
                    class="w-full h-full object-cover opacity-50 scale-100 transition-transform duration-300 ease-out"
                    alt="Hero Background">
            </div>
            <!-- Dark overlay for better readability -->
            <div class="absolute inset-0 bg-black/40 dark:bg-gray-900/70 transition-colors duration-300"></div>
            <!-- Content -->
            <div class="relative z-10 container mx-auto px-4 text-center">
                <h1 class="text-4xl md:text-6xl font-bold mb-6 animate__animated animate__fadeIn ">
                    منصة التعليم العربية الشاملة
                </h1>
                <p class="text-xl md:text-2xl mb-8 opacity-90 dark:opacity-80 transition-colors duration-300 ">
                    اكتشف عالم المعرفة مع كورسات، مقالات، منح تدريبية، كتب وملخصات
                </p>
                <div class="flex flex-wrap justify-center gap-4">
                    <a href="{% url 'courses' %}" class="bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 px-8 py-3 rounded-lg font-bold text-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300">
                        <i class="fas fa-play-circle mr-2"></i> ابدأ التعلم الآن
                    </a>
                    {% comment %} <a href="{% url 'register' %}" class="bg-transparent border-2 border-white dark:border-gray-300 text-white dark:text-gray-300 px-8 py-3 rounded-lg font-bold text-lg hover:bg-white dark:hover:bg-gray-800 hover:text-blue-600 dark:hover:text-blue-400 transition-all duration-300">
                        <i class="fas fa-user-plus mr-2"></i> انضم إلينا
                    </a> {% endcomment %}
                </div>

                <!-- Search -->
                <div class="flex justify-center w-full pt-6 px-4">
                    <form method="get" action="{% url 'search' %}" 
                        class="relative w-full max-w-2xl z-10" id="search-form">
                        <div class="relative z-20">
                        <input
                        type="text"
                        name="q"
                        placeholder="ابحث عن كورسات، مقالات، منح، كتب وملخصات..."
                        id="search-input"
                        autocomplete="off"
                        class="w-full px-6 py-4 pr-28 bg-white dark:bg-gray-800
                                border-2 border-gray-200 dark:border-gray-700
                                rounded-full shadow-lg dark:shadow-gray-900/50
                                focus:outline-none focus:border-blue-500 dark:focus:border-blue-400
                                focus:ring-4 focus:ring-blue-500/20 dark:focus:ring-blue-400/30
                                placeholder-gray-400 dark:placeholder-gray-500
                                text-gray-800 dark:text-gray-200 text-lg
                                transition-all duration-300 ease-out
                                hover:border-gray-300 dark:hover:border-gray-600
                                placeholder:transition-all placeholder:duration-300
                                placeholder:hover:opacity-70 dark-mode-transition">


                            <button type="submit"
                                    class="absolute left-5 top-1/2 transform -translate-y-1/2 
                                        w-10 h-10 flex items-center justify-center
                                        bg-gradient-to-r from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700
                                        text-white rounded-full 
                                        shadow-md dark:shadow-gray-900/50
                                        hover:from-blue-600 hover:to-blue-700 dark:hover:from-blue-700 dark:hover:to-blue-800
                                        active:scale-95 focus:outline-none focus:ring-3 focus:ring-blue-500/40
                                        transition-all duration-300 ease-out group
                                        z-30">
                                <i class="fas fa-search text-sm group-hover:scale-110 transition-transform duration-300"></i>
                            </button>

                            <!-- Search Type Selector -->
                            <div class="absolute right-5 top-1/2 transform -translate-y-1/2 z-30">
                                <select name="type" 
                                        class="bg-transparent border-none outline-none 
                                            text-gray-500 dark:text-gray-400 text-sm
                                            cursor-pointer focus:outline-none
                                            transition-colors duration-300 dark-mode-transition
                                            pr-2">
                                    <option value="">كل النتائج</option>
                                    <option value="courses">كورسات</option>
                                    <option value="articles">مقالات</option>
                                    <option value="grants">منح</option>
                                    <option value="books">كتب</option>
                                </select>
                            </div>
                        </div>

                        <!-- Search Suggestions -->
                        <div id="search-suggestions" 
                            class="absolute top-full mt-3 w-full bg-white dark:bg-gray-800 
                                    rounded-2xl shadow-2xl dark:shadow-gray-900/50
                                    border border-gray-100 dark:border-gray-700 
                                    hidden z-40 max-h-[500px] overflow-y-auto
                                    backdrop-blur-sm bg-white/95 dark:bg-gray-800/95
                                    transition-all duration-300 ease-out opacity-0 translate-y-2
                                    scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent dark-mode-transition"
                            style="display: none;">
                            
                            <!-- Popular Searches -->
                            <div class="px-6 py-4 border-b border-gray-100 dark:border-gray-700">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="text-sm font-semibold text-gray-600 dark:text-gray-400">
                                        <i class="fas fa-fire ml-2 text-orange-500"></i> 
                                        <span class="mr-1">البحث الشائع</span>
                                    </h4>
                                </div>
                                <div class="flex flex-wrap gap-2">
                                    {% for term in popular_terms|slice:":5" %}
                                    <a href="{% url 'search' %}?q={{ term|urlencode }}" 
                                    class="inline-flex items-center px-3 py-1.5 
                                            bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600
                                            text-gray-700 dark:text-gray-300 text-sm rounded-full
                                            transition-all duration-300 ease-out hover:scale-105
                                            border border-gray-200 dark:border-gray-600 dark-mode-transition">
                                        <i class="fas fa-hashtag text-xs ml-1.5 text-gray-400 dark:text-gray-500"></i>
                                        <span class="mr-1">{{ term }}</span>
                                    </a>
                                    {% empty %}
                                    <div class="text-gray-500 dark:text-gray-400 text-sm">
                                        لا توجد عمليات بحث شائعة حالياً
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                            <!-- Recent Searches -->
                            <div id="recent-searches" class="px-6 py-4 border-b border-gray-100 dark:border-gray-700 hidden">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="text-sm font-semibold text-gray-600 dark:text-gray-400">
                                        <i class="fas fa-history ml-2 text-blue-500"></i>
                                        <span class="mr-1">عمليات البحث السابقة</span>
                                    </h4>
                                    <button onclick="clearRecentSearches()" 
                                            class="text-xs text-gray-400 dark:text-gray-500 hover:text-red-500 transition-colors
                                                px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 dark-mode-transition">
                                        مسح الكل
                                    </button>
                                </div>
                                <div id="recent-searches-list" class="space-y-2">
                                    <!-- Dynamic content from localStorage -->
                                </div>
                            </div>
                            <!-- Live Search Results -->
                            <div id="live-search-results" class="py-2 flex flex-col gap-2 text-right">
                                <!-- AJAX results -->
                            </div>
                            <!-- Empty State -->
                            <div id="search-empty-state" class="px-6 py-8 text-center hidden">
                                <div class="w-16 h-16 mx-auto mb-4 flex items-center justify-center 
                                            bg-gray-100 dark:bg-gray-700 rounded-full dark-mode-transition">
                                    <i class="fas fa-search text-gray-400 dark:text-gray-500 text-xl"></i>
                                </div>
                                <p class="text-gray-500 dark:text-gray-400 mb-2">لم يتم العثور على نتائج</p>
                                <p class="text-sm text-gray-400 dark:text-gray-500">
                                    جرب كلمات بحث مختلفة أو تحقق من الإملاء
                                </p>
                            </div>

                            <!-- Loading State -->
                            <div id="search-loading" class="px-6 py-8 text-center hidden">
                                <div class="inline-block w-8 h-8 border-2 border-gray-300 dark:border-gray-600 
                                            border-t-blue-500 dark:border-t-blue-400 rounded-full animate-spin"></div>
                                <p class="mt-3 text-gray-500 dark:text-gray-400">جاري البحث...</p>
                            </div>

                            <!-- Quick Categories -->
                            <div class="px-6 py-4 border-t border-gray-100 dark:border-gray-700">
                                <div class="grid grid-cols-2 gap-3">
                                    <a href="{% url 'courses' %}" 
                                    class="flex items-center p-3 rounded-xl
                                            bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/40
                                            border border-blue-100 dark:border-blue-800/30
                                            transition-all duration-300 group dark-mode-transition">
                                        <div class="w-10 h-10 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 
                                                    flex items-center justify-center text-white ml-3">
                                            <i class="fas fa-video text-sm"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-800 dark:text-gray-200">الكورسات</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">{{ courses_posts.count }} كورس</p>
                                        </div>
                                        <i class="fas fa-chevron-left text-gray-400 dark:text-gray-500 
                                                group-hover:translate-x-1 transition-transform"></i>
                                    </a>

                                    <a href="{% url 'books' %}" 
                                    class="flex items-center p-3 rounded-xl
                                            bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/40
                                            border border-purple-100 dark:border-purple-800/30
                                            transition-all duration-300 group dark-mode-transition">
                                        <div class="w-10 h-10 rounded-lg bg-gradient-to-r from-purple-500 to-purple-600 
                                                    flex items-center justify-center text-white ml-3">
                                            <i class="fas fa-book text-sm"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-800 dark:text-gray-200">الكتب</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">{{ books_posts.count }} كتاب</p>
                                        </div>
                                        <i class="fas fa-chevron-left text-gray-400 dark:text-gray-500 
                                                group-hover:translate-x-1 transition-transform"></i>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- Search Stats -->
                        <div id="search-stats" 
                            class="absolute -bottom-8 left-0 right-0 text-center 
                                    text-xs text-gray-500 dark:text-gray-400 opacity-0 
                                    transition-opacity duration-300 z-30 dark-mode-transition">
                            <span id="results-count">0</span> نتيجة متاحة
                        </div>
                    </form>
                </div>

            </div>
    </section>

    <section class="py-14 bg-white dark:bg-gray-900 transition-colors duration-300">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">

                <!-- كورسات -->
                <div class="relative overflow-hidden rounded-2xl text-white p-6 text-center shadow-xl group transform transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl dark-mode-transition">
                    <img src="{% static 'images/courses-bg.jpg' %}" 
                        class="absolute inset-0 w-full h-full object-cover scale-110 group-hover:scale-125 transition-transform duration-700"
                        alt="">
                    <div class="absolute inset-0 bg-black/60 dark:bg-gray-900/70 group-hover:bg-black/50 dark:group-hover:bg-gray-800/60 transition-colors duration-500"></div>
                    <div class="relative z-10">
                        <i class="fas fa-video text-4xl mb-4 text-blue-400 group-hover:text-blue-300 transition-colors duration-300"></i>
                        <h3 class="text-4xl font-extrabold group-hover:text-white transition-colors duration-300">{{ courses_posts.count }}+</h3>
                        <p class="opacity-90 mt-1 group-hover:text-gray-200 transition-colors duration-300">كورس تعليمي</p>
                    </div>
                    <!-- Glow -->
                    <div class="absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-20 bg-gradient-to-tr from-blue-500 via-blue-300 to-white transition-opacity duration-500 mix-blend-screen pointer-events-none"></div>
                </div>

                <!-- مقالات -->
                <div class="relative overflow-hidden rounded-2xl text-white p-6 text-center shadow-xl group transform transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl dark-mode-transition">
                    <img src="{% static 'images/articles-bg.jpg' %}" 
                        class="absolute inset-0 w-full h-full object-cover scale-110 group-hover:scale-125 transition-transform duration-700"
                        alt="">
                    <div class="absolute inset-0 bg-black/60 dark:bg-gray-900/70 group-hover:bg-black/50 dark:group-hover:bg-gray-800/60 transition-colors duration-500"></div>
                    <div class="relative z-10">
                        <i class="fas fa-newspaper text-4xl mb-4 text-green-400 group-hover:text-green-300 transition-colors duration-300"></i>
                        <h3 class="text-4xl font-extrabold group-hover:text-white transition-colors duration-300">{{ articles_posts.count }}+</h3>
                        <p class="opacity-90 mt-1 group-hover:text-gray-200 transition-colors duration-300">مقال تعليمي</p>
                    </div>
                    <div class="absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-20 bg-gradient-to-tr from-green-500 via-green-300 to-white transition-opacity duration-500 mix-blend-screen pointer-events-none"></div>
                </div>

                <!-- منح -->
                <div class="relative overflow-hidden rounded-2xl text-white p-6 text-center shadow-xl group transform transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl dark-mode-transition">
                    <img src="{% static 'images/grants-bg.jpg' %}" 
                        class="absolute inset-0 w-full h-full object-cover scale-110 group-hover:scale-125 transition-transform duration-700"
                        alt="">
                    <div class="absolute inset-0 bg-black/60 dark:bg-gray-900/70 group-hover:bg-black/50 dark:group-hover:bg-gray-800/60 transition-colors duration-500"></div>
                    <div class="relative z-10">
                        <i class="fas fa-award text-4xl mb-4 text-yellow-400 group-hover:text-yellow-300 transition-colors duration-300"></i>
                        <h3 class="text-4xl font-extrabold group-hover:text-white transition-colors duration-300">{{ grants_posts.count }}+</h3>
                        <p class="opacity-90 mt-1 group-hover:text-gray-200 transition-colors duration-300">منحة تدريبية</p>
                    </div>
                    <div class="absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-20 bg-gradient-to-tr from-yellow-500 via-yellow-300 to-white transition-opacity duration-500 mix-blend-screen pointer-events-none"></div>
                </div>

                <!-- كتب -->
                <div class="relative overflow-hidden rounded-2xl text-white p-6 text-center shadow-xl group transform transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl dark-mode-transition">
                    <img src="{% static 'images/books-bg.jpg' %}" 
                        class="absolute inset-0 w-full h-full object-cover scale-110 group-hover:scale-125 transition-transform duration-700"
                        alt="">
                    <div class="absolute inset-0 bg-black/60 dark:bg-gray-900/70 group-hover:bg-black/50 dark:group-hover:bg-gray-800/60 transition-colors duration-500"></div>
                    <div class="relative z-10">
                        <i class="fas fa-book text-4xl mb-4 text-pink-400 group-hover:text-pink-300 transition-colors duration-300"></i>
                        <h3 class="text-4xl font-extrabold group-hover:text-white transition-colors duration-300">{{ books_posts.count }}+</h3>
                        <p class="opacity-90 mt-1 group-hover:text-gray-200 transition-colors duration-300">كتاب وملخص</p>
                    </div>
                    <div class="absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-20 bg-gradient-to-tr from-pink-500 via-pink-300 to-white transition-opacity duration-500 mix-blend-screen pointer-events-none"></div>
                </div>

            </div>
        </div>
    </section>


    <section class="relative min-h-screen flex items-center justify-center overflow-hidden bg-white dark:bg-gradient-to-b dark:from-gray-900 dark:to-gray-800 section-animate animate-card transition-colors duration-300">
        <div id="stars" class="absolute inset-0"></div>
        <div class="relative z-10 grid grid-cols-1 md:grid-cols-3 gap-12 items-center max-w-7xl px-10">
            <!-- النص الأيسر -->
            <div class="text-right space-y-6">
                <h1 class="text-4xl md:text-5xl font-bold mb-6 animate__animated animate__fadeIn">
                    كنوز المعرفة
                </h1>
                <p class="text-gray-600 font-bold dark:text-gray-300 leading-loose">
                    كنوز هو عالم رقمي يجمع أفضل الكورسات، الكتب، المقالات، والفرص التعليمية 
                    في مكان واحد ليمنحك طريقًا واضحًا لبناء مستقبلك.
                </p>
            </div>
            <!-- الكوكب -->
            <div class="flex justify-center">
                <div id="earth-container" class="relative">
                    <div id="earth" class="earth w-80 h-80 md:w-96 md:h-96 rounded-full"></div>
                    <div id="atmosphere" class="atmosphere absolute inset-0 rounded-full"></div>
                </div>
            </div>
            <!-- النص الأيمن -->
            <div class="text-left space-y-6">
                <h2 class="text-4xl md:text-5xl font-bold mb-6 animate__animated animate__fadeIn">
                    رحلتك تبدأ هنا
                </h2>
                <p class="text-gray-600 font-bold dark:text-gray-300 leading-loose">
                    من البرمجة إلى المنح العالمية،  
                    ومن الكتب إلى المهارات العملية —  
                    كنوز يضع العالم بين يديك.
                </p>
            </div>
        </div>
    </section>

    <!-- الأقسام -->
    <section class="py-16 bg-gray-50 dark:bg-gray-800 transition-colors duration-300 section-animate animate-card">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-800 dark:text-gray-100 mb-12 transition-colors duration-300">
                استكشف أقسامنا التعليمية
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- الكورسات -->
                <a href="{% url 'courses' %}" class="bg-white dark:bg-gray-700 rounded-xl shadow-lg p-6 text-center card-hover animate-card dark-mode-transition">
                    <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-video text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300">الكورسات</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4 transition-colors duration-300">دروس تعليمية متخصصة تغطي مختلف المجالات</p>
                    <div class="text-blue-600 dark:text-blue-400 font-medium transition-colors duration-300">
                        <span>استعرض {{ courses_posts.count }} كورس</span>
                        <i class="fas fa-arrow-left mr-2"></i>
                    </div>
                </a>
                
                <!-- المقالات -->
                <a href="{% url 'articles' %}" class="bg-white dark:bg-gray-700 rounded-xl shadow-lg p-6 text-center card-hover animate-card dark-mode-transition">
                    <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-newspaper text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300">المقالات</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4 transition-colors duration-300">مقالات تعليمية ومواضيع متنوعة</p>
                    <div class="text-green-600 dark:text-green-400 font-medium transition-colors duration-300">
                        <span>استعرض {{ articles_posts.count }} مقال</span>
                        <i class="fas fa-arrow-left mr-2"></i>
                    </div>
                </a>
                
                <!-- المنح والتدريبات -->
                <a href="{% url 'grants' %}" class="bg-white dark:bg-gray-700 rounded-xl shadow-lg p-6 text-center card-hover animate-card dark-mode-transition">
                    <div class="w-16 h-16 bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-award text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300">المنح والتدريبات</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4 transition-colors duration-300">فرص منح دراسية وتدريبات عملية</p>
                    <div class="text-yellow-600 dark:text-yellow-400 font-medium transition-colors duration-300">
                        <span>استعرض {{ grants_posts.count }} فرصة</span>
                        <i class="fas fa-arrow-left mr-2"></i>
                    </div>
                </a>
                
                <!-- الكتب والملخصات -->
                <a href="{% url 'books' %}" class="bg-white dark:bg-gray-700 rounded-xl shadow-lg p-6 text-center card-hover animate-card dark-mode-transition">
                    <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-book text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-2 transition-colors duration-300">الكتب والملخصات</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4 transition-colors duration-300">كتب وملخصات تعليمية متنوعة</p>
                    <div class="text-purple-600 dark:text-purple-400 font-medium transition-colors duration-300">
                        <span>استعرض {{ books_posts.count }} كتاب</span>
                        <i class="fas fa-arrow-left mr-2"></i>
                    </div>
                </a>
            </div>
        </div>
    </section>

    <!-- آخر المنشورات -->
    <section class="py-16 bg-white dark:bg-gray-900 transition-colors duration-300 section-animate animate-card">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-800 dark:text-gray-100 mb-12 transition-colors duration-300">
                آخر المنشورات
            </h2>
            
            <!-- الكورسات -->
            <div class="mb-12">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-blue-600 dark:text-blue-400 transition-colors duration-300">
                        <i class="fas fa-video mr-2"></i> أحدث الكورسات
                    </h3>
                    <a href="{% url 'courses' %}" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium transition-colors duration-300">
                        عرض الكل <i class="fas fa-arrow-left mr-1"></i>
                    </a>
                </div>
                {% if courses_posts %}
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    {% for post in courses_posts|slice:":3" %}
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden card-hover animate-card dark-mode-transition">
                        {% if post.image %}
                        <img src="{{ post.image.url }}" alt="{{ post.title }}" class="w-full h-48 object-cover">
                        {% else %}
                        <div class="w-full h-48 bg-gradient-to-r from-blue-400 to-blue-600 flex items-center justify-center">
                            <i class="fas fa-video text-white text-4xl"></i>
                        </div>
                        {% endif %}
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="text-lg font-bold text-gray-800 dark:text-gray-100 transition-colors duration-300">{{ post.title|truncatechars:50 }}</h4>
                            </div>
                            <p class="text-gray-600 dark:text-gray-300 mb-4 transition-colors duration-300">{{ post.content|truncatechars:80 }}</p>
                            <div class="flex justify-between items-center">
                                <a href="{% url 'post_detail' post.slug %}" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium transition-colors duration-300">
                                    اقرأ المزيد <i class="fas fa-arrow-left mr-1"></i>
                                </a>
                                <div class="flex items-center text-gray-500 dark:text-gray-400 transition-colors duration-300">
                                    <i class="fas fa-eye ml-2"></i>
                                    <span class="text-sm">{{ post.views }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            
            <!-- المقالات -->
            <div class="mb-12">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-green-600 dark:text-green-400 transition-colors duration-300">
                        <i class="fas fa-newspaper mr-2"></i> أحدث المقالات
                    </h3>
                    <a href="{% url 'articles' %}" class="text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 font-medium transition-colors duration-300">
                        عرض الكل <i class="fas fa-arrow-left mr-1"></i>
                    </a>
                </div>
                {% if articles_posts %}
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    {% for post in articles_posts|slice:":3" %}
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden card-hover animate-card dark-mode-transition">
                        {% if post.image %}
                        <img src="{{ post.image.url }}" alt="{{ post.title }}" class="w-full h-48 object-cover">
                        {% else %}
                        <div class="w-full h-48 bg-gradient-to-r from-green-400 to-green-600 flex items-center justify-center">
                            <i class="fas fa-newspaper text-white text-4xl"></i>
                        </div>
                        {% endif %}
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="text-lg font-bold text-gray-800 dark:text-gray-100 transition-colors duration-300">{{ post.title|truncatechars:50 }}</h4>
                            </div>
                            <p class="text-gray-600 dark:text-gray-300 mb-4 transition-colors duration-300">{{ post.content|truncatechars:80 }}</p>
                            <div class="flex justify-between items-center">
                                <a href="{% url 'post_detail' post.slug %}" class="text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 font-medium transition-colors duration-300">
                                    اقرأ المزيد <i class="fas fa-arrow-left mr-1"></i>
                                </a>
                                <div class="flex items-center text-gray-500 dark:text-gray-400 transition-colors duration-300">
                                    <i class="fas fa-eye ml-2"></i>
                                    <span class="text-sm">{{ post.views }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        
            <!-- المنح والتدريبات -->
            <div class="mb-12">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-yellow-600 dark:text-yellow-400 transition-colors duration-300">
                        <i class="fas fa-award mr-2"></i> المنح والتدريبات
                    </h3>
                    <a href="{% url 'grants' %}" class="text-yellow-600 dark:text-yellow-400 hover:text-yellow-800 dark:hover:text-yellow-300 font-medium transition-colors duration-300">
                        عرض الكل <i class="fas fa-arrow-left mr-1"></i>
                    </a>
                </div>
                {% if grants_posts %}
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    {% for post in grants_posts|slice:":3" %}
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden card-hover animate-card dark-mode-transition">
                        {% if post.image %}
                        <img src="{{ post.image.url }}" alt="{{ post.title }}" class="w-full h-48 object-cover">
                        {% else %}
                        <div class="w-full h-48 bg-gradient-to-r from-yellow-400 to-yellow-600 flex items-center justify-center">
                            <i class="fas fa-award text-white text-4xl"></i>
                        </div>
                        {% endif %}
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="text-lg font-bold text-gray-800 dark:text-gray-100 transition-colors duration-300">{{ post.title|truncatechars:50 }}</h4>
                            </div>
                            <p class="text-gray-600 dark:text-gray-300 mb-4 transition-colors duration-300">{{ post.content|truncatechars:80 }}</p>
                            <div class="flex justify-between items-center">
                                <a href="{% url 'post_detail' post.slug %}" class="text-yellow-600 dark:text-yellow-400 hover:text-yellow-800 dark:hover:text-yellow-300 font-medium transition-colors duration-300">
                                    اقراء المزيد <i class="fas fa-arrow-left mr-1"></i>
                                </a>
                                <div class="flex items-center text-gray-500 dark:text-gray-400 transition-colors duration-300">
                                    <i class="fas fa-eye ml-2"></i>
                                    <span class="text-sm">{{ post.views }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>

            <!-- كتب الكنوز -->
            <div class="mb-12">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-purple-600 dark:text-purple-400 transition-colors duration-300">
                        <i class="fas fa-book mr-2"></i> كتب الكنوز
                    </h3>
                    <a href="{% url 'books' %}" class="text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 font-medium transition-colors duration-300">
                        عرض الكل <i class="fas fa-arrow-left mr-1"></i>
                    </a>
                </div>
                {% if books_posts %}
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    {% for post in books_posts|slice:":3" %}
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden card-hover animate-card dark-mode-transition">
                        {% if post.image %}
                        <img src="{{ post.image.url }}" alt="{{ post.title }}" class="w-full h-48 object-cover">
                        {% else %}
                        <div class="w-full h-48 bg-gradient-to-r from-teal-400 to-teal-600 flex items-center justify-center">
                            <i class="fas fa-book text-white text-4xl"></i>
                        </div>
                        {% endif %}
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="text-lg font-bold text-gray-800 dark:text-gray-100 transition-colors duration-300">{{ post.title|truncatechars:50 }}</h4>
                            </div>
                            <p class="text-gray-600 dark:text-gray-300 mb-4 transition-colors duration-300">{{ post.content|truncatechars:80 }}</p>
                            <div class="flex justify-between items-center">
                                <a href="{% url 'post_detail' post.slug %}" class="text-teal-600 dark:text-teal-400 hover:text-teal-800 dark:hover:text-teal-300 font-medium transition-colors duration-300">
                                    اقراء المزيد <i class="fas fa-arrow-left mr-1"></i>
                                </a>
                                <div class="flex items-center text-gray-500 dark:text-gray-400 transition-colors duration-300">
                                    <i class="fas fa-eye ml-2"></i>
                                    <span class="text-sm">{{ post.views }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
    </section>
{% endblock %}

{% block extra_js %}
    <!-- earth JavaScript مع GSAP -->
    <script>
            // إنشاء النجوم الديناميكية
            function createStars() {
                const starsContainer = document.getElementById('stars');
                for (let i = 0; i < 200; i++) {
                    const star = document.createElement('div');
                    star.className = 'absolute rounded-full bg-white';
                    star.style.width = Math.random() * 2 + 1 + 'px';
                    star.style.height = star.style.width;
                    star.style.left = Math.random() * 100 + '%';
                    star.style.top = Math.random() * 100 + '%';
                    star.style.opacity = Math.random() * 0.7 + 0.3;
                    starsContainer.appendChild(star);
                }
            }
            
            // تدوير الكوكب باستخدام GSAP
            function animateEarth() {
                // تدوير الكوكب الرئيسي
                gsap.to("#earth", {
                    rotation: 360,
                    duration: 40,
                    repeat: -1,
                    ease: "none",
                    transformOrigin: "center center"
                });
                
                // تدوير الغلاف الجوي بشكل أبطأ قليلاً
                gsap.to("#atmosphere", {
                    rotation: -180,
                    duration: 50,
                    repeat: -1,
                    ease: "none",
                    transformOrigin: "center center"
                });
                
                // إضافة تأثير اللمعة المتحركة
                const glow = document.createElement('div');
                glow.className = 'earth-glow';
                glow.style.top = '50%';
                glow.style.left = '50%';
                document.getElementById('earth-container').appendChild(glow);
                
                // تأثير نبض خفيف
                gsap.to("#earth", {
                    scale: 1.02,
                    duration: 4,
                    repeat: -1,
                    yoyo: true,
                    ease: "sine.inOut"
                });
            }
            
            // تهيئة عند تحميل الصفحة
            document.addEventListener('DOMContentLoaded', function() {
                createStars();
                animateEarth();
                
                // إضافة تفاعل عند المرور بالفأرة
                const earth = document.getElementById('earth');
                earth.addEventListener('mouseenter', () => {
                    gsap.to("#earth", {
                        scale: 1.05,
                        duration: 0.5,
                        boxShadow: "0 0 150px rgba(30, 144, 255, 0.8)"
                    });
                });
                
                earth.addEventListener('mouseleave', () => {
                    gsap.to("#earth", {
                        scale: 1,
                        duration: 0.5,
                        boxShadow: "0 0 100px rgba(65, 105, 225, 0.5)"
                    });
                });
            });

            document.addEventListener("DOMContentLoaded", () => {
            gsap.to("#earth", {
                rotation: 360,
                duration: 40,
                repeat: -1,
                ease: "none"
            });

            gsap.to("#atmosphere", {
                rotation: -180,
                duration: 60,
                repeat: -1,
                ease: "none"
            });
        });
    </script>
{% endblock %}
