{% extends "admin/change_form.html" %}
{% load i18n admin_urls static admin_modify %}

{% block extrahead %}
{{ block.super }}
<script src="{% static 'admin/js/jquery.init.js' %}"></script>
<script src="{% static 'admin/js/ckeditor/ckeditor.js' %}"></script>
<style>
    .content-builder-link {
        background: #28a745;
        color: white;
        padding: 10px 15px;
        border-radius: 4px;
        text-decoration: none;
        display: inline-block;
        margin: 10px 0;
    }
    .content-builder-link:hover {
        background: #218838;
        color: white;
    }
</style>
{% endblock %}

{% block object-tools %}
{% if change %}
    <ul class="object-tools">
        {% block object-tools-items %}
        <li>
            <a href="{% url 'admin:blog_post_content_builder' original.pk %}" class="content-builder-link">
                ğŸ› ï¸ {% trans "Advanced Content Builder" %}
            </a>
        </li>
        <li>
            {% url opts|admin_urlname:'history' original.pk|admin_urlquote as history_url %}
            <a href="{% add_preserved_filters history_url %}" class="historylink">{% trans "History" %}</a>
        </li>
        {% if has_absolute_url %}
        <li>
            <a href="{{ absolute_url }}" class="viewsitelink">{% trans "View on site" %}</a>
        </li>
        {% endif %}
        {% endblock %}
    </ul>
{% endif %}
{% endblock %}

{% block field_sets %}
{% for fieldset in adminform %}
    {% if fieldset.name == "Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ" %}
        <fieldset class="module aligned {{ fieldset.classes }}">
            <h2>{{ fieldset.name }}</h2>
            {% if fieldset.description %}
            <div class="description">{{ fieldset.description|safe }}</div>
            {% endif %}
            
            {% for line in fieldset %}
                <div class="form-row{% if line.fields|length_is:'1' and line.errors %} errors{% endif %}{% if not line.has_visible_field %} hidden{% endif %}{% for field in line %}{% if field.field.name %} field-{{ field.field.name }}{% endif %}{% endfor %}">
                    {% if line.fields|length_is:'1' %}{{ line.errors }}{% endif %}
                    {% for field in line %}
                        <div{% if not line.fields|length_is:'1' %} class="field-box{% if field.field.name == 'content' %} full-width{% endif %}{% if not field.is_readonly and field.errors %} errors{% endif %}{% if field.field.is_hidden %} hidden{% endif %}"{% elif field.is_checkbox %} class="checkbox-row"{% endif %}>
                            {% if not line.fields|length_is:'1' and not field.is_readonly %}{{ field.errors }}{% endif %}
                            {% if field.is_checkbox %}
                                {{ field.field }}{{ field.label_tag }}
                            {% else %}
                                {{ field.label_tag }}
                                {% if field.is_readonly %}
                                    <div class="readonly">{{ field.contents }}</div>
                                {% else %}
                                    {{ field.field }}
                                {% endif %}
                            {% endif %}
                            {% if field.field.help_text %}
                                <div class="help">{{ field.field.help_text|safe }}</div>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </fieldset>
        
        <div class="module aligned">
            <h2>ğŸ¨ Ù…Ø­Ø±Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (Ø§Ù„ÙƒØªÙ„)</h2>
            <div class="description" style="background: #e7f3ff; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
                <p><strong>ğŸ’¡ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:</strong></p>
                <ol style="margin-left: 20px;">
                    <li>Ø£Ø¶Ù ÙƒØªÙ„ Ù†ØµÙŠØ© Ø£Ùˆ ØµÙˆØ± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚Ø³Ù… Ø£Ø¯Ù†Ø§Ù‡</li>
                    <li>Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø§Ù„ÙƒØªÙ„ Ù„ØªØ±ØªÙŠØ¨Ù‡Ø§ ÙƒÙ…Ø§ ØªØ±ÙŠØ¯</li>
                    <li>Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± "ØªØ¹Ø¯ÙŠÙ„ Ù…ÙØµÙ„" Ù„Ù„ØªØ­Ø±ÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</li>
                    <li>Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø£Ø¹Ù„Ø§Ù‡ Ø³ÙŠØ¸Ù‡Ø± Ù‚Ø¨Ù„ Ø§Ù„ÙƒØªÙ„ ÙÙŠ Ø§Ù„Ù…Ù‚Ø§Ù„</li>
                </ol>
            </div>
            
            {% for inline_admin_formset in inline_admin_formsets %}
                {% if inline_admin_formset.opts.verbose_name == "PostBlock" %}
                    {% include inline_admin_formset.opts.template %}
                {% endif %}
            {% endfor %}
        </div>
    {% else %}
        {{ block.super }}
    {% endif %}
{% endfor %}
{% endblock %}